# 17.3

有关实现，有两个方面较为有趣。第一个是虚拟内存系统为了支持这里的特性，具体会发生什么？这里我们只会讨论最重要的部分，并且它也与即将开始的mmap lab有一点相关，因为你们将要做类似的事情。在现代的Unix系统的，地址空间是由硬件Page Table来体现的，Page Table中包含了地址翻译。但是通常来说，它还包含了一些操作系统的数据结构，这些数据结构与任何硬件设计都无关，它们被称为Virtual Memory Areas（VMAs）。VMA会记录一些有关连续地址段的信息。所以如果你设想一个地址空间，它可能包含了多个section，每一个都由一个连续的地址段构成，对于每个section，都由一个VMA。连续地址段中的所有Page都由相同的权限，并且都对应同一个对象。

![](../.gitbook/assets/image%20%28760%29.png)

举个例子，如果你有一个Memory Mapped File，会有一个VMA对应那个文件并描述对于文件的权限，以及文件本身的信息，例如文件描述符，文件的offset。在接下来的mmap lab中，你们将会实现一个非常简单版本的VMA，并用它来实现针对文件的mmap系统调用。你可以在VMA中记录mmap系统调用参数中的文件描述符和offset。

