# 10.7 实现锁

接下来我们看一下如何实现锁。锁的特性就是只有一个进程可以获取锁，在任何时间点都不能有超过一个锁的持有者。我们接下来看一下锁是如何确保这里的特性。

我们先来看一个有问题的锁，这样我们能更好的理解这里的挑战是什么。挑战主要在锁的acquire接口，在acquire里面有一个死循环，循环中判断锁对象的locked字段是否为0，如果为0那表明当前锁没有持有者，当前的调用可以获取锁。之后我们通过设置锁对象的locket字段为1来获取锁。之后返回。

![](../.gitbook/assets/image%20%28457%29.png)

如果锁的locked对象不为0，那么当前调用不能获取锁，那么程序就一直spin。程序在循环中不同的重复执行，直到锁的持有者调用了release并将锁对象的locked设置为0。

