# 13.6

前面我们介绍了一种场景，通过使用sleep和wakeup来避免lost wakeup，XV6中还有很多其他的场景。在我们这个特定的场景中，我们在等待的condition是发生了中断并标明硬件准备好了完成下一件事情。也有一些场景，内核代码调用sleep函数并等待一些其他的线程完成某些事情。这些场景最终从概念上来说与我们介绍的场景没有什么区别，但是感觉上还是有些差异。

例如，在读写pipe的代码中，如果你查看pipe.c中的piperead函数，

![](../.gitbook/assets/image%20%28524%29.png)

这里有很多无关的代码可以忽略。当read系统调用最终调用到piperead函数时，-

